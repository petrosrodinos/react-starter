---
description: "This is the main rules for the project."
alwaysApply: true
---

## Role

You are a senior React + TypeScript engineer.

## General Engineering Rules

* Use functional components only
* Use TypeScript everywhere, no `any`
* Prefer composition over inheritance
* Keep components small and focused
* No business logic inside JSX
* No inline functions inside JSX unless memoized
* Extract logic into hooks
* Use immutable state updates only
* Prefer controlled components
* Avoid prop drilling; use context or stores
* Prefer named exports
* Do not over-abstract
* Optimize for readability first, performance second
* Follow React 18 best practices
* Assume production-grade code
* Never add comments

## Component Rules

* Component must be a named export
* No default exports
* Use arrow functions for components
* Props interface must be defined at the top of the file
* Props interface naming pattern: `ComponentNameProps`
* Props must be explicitly typed
* JSX must be minimal and readable
* No calculations inside JSX
* Use early returns
* Use memoization only when needed
* Styling must be separated
* Component must be testable in isolation
* No helper functions inside components

## Naming Conventions

* Component names: PascalCase
* File names: kebab-case
* Function names: camelCase
* Function parameters: snake_case
* Variables: camelCase
* Hooks: camelCase
* Object keys: snake_case
* Interfaces: snake_case

## File & Folder Rules

* Always separate components into separate files
* Follow the defined folder structure strictly
* Never create `readme.md` files

## Folder Structure

```
- features/
  - user/
    - hooks/use-user.ts
    - services/user.service.ts
    - interfaces/user.interface.ts
    - utils/user.utils.ts

- pages/
  - user/
    - hooks/use-user.ts
    - components/
      - user-card.tsx
      - user-list.tsx
      - user-form.tsx
      - user-loading.tsx
    - pages/
      - user-page
        - components/
        - index.tsx

- interfaces/
- hooks/
- stores/
- routes/
- lib/
- config/
- constants/
```

## Hooks Rules

* One responsibility per hook
* Hooks must not render JSX
* Hooks return stable APIs
* Hooks must be pure except for effects
* Side effects only inside `useEffect`
* All hooks typed explicitly
* Helper functions for pages and components must live in a `hooks` folder at the top level of the component or page folder

## State Management Rules

* App state must live in Zustand stores
* UI state stays local
* No derived state stored
* No mutation

## Validation Rules

* Always use `react-hook-form`
* Always use `zod` for validation
* Validation schemas must live in a separate `validation-schemas` folder
* No inline validation schemas inside components or hooks

## Loading & Skeleton Rules

* Always use shadcn/ui skeletons when loading data
* Skeleton components must live in the parent component folder
* Skeletons must be defined in a separate file

## Date & Time Rules

* Always use `luxon` for date and time manipulation

## TypeScript Rules

* Strict mode assumed
* No `any`, `unknown` only when justified
* Use union types instead of enums where possible
* Prefer readonly types for state
* Prefer explicit return types for public functions
* Discriminated unions for game logic

## Constants & Config Rules

All constant values used in:

* dropdowns
* selects
* filters
* enums shown to users
* game options
* feature flags
* size / mode / type selectors

Must be defined in a dedicated config file.

### Constant Pattern

* Uppercase keys
* Literal string values
* `as const`
* Exported union type derived from values

### Forbidden

* Enums for UI-facing options
* Magic strings in JSX
* Defining options inside components
* Defining values without `as const`
* Manually written union types

## Helpers & Utils Rules

* Helper methods must never be defined inside:

  * components
  * services
  * controllers
  * hooks
  * gateways

* Helpers must live in a dedicated helper or utils folder

* Cross-feature helpers go in the root `utils` folder

* Helper files must:

  * End with `.helper.ts` or `.utils.ts`
  * Be named after their responsibility
  * Export named functions only

## Absolute Prohibitions

* Comments in code
* `useEffect` for derived state
* Using index as React key
* Mutating arrays or objects
* Inline complex logic in JSX
* God components
* Mixing UI and business logic
